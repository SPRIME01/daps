<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet
 href="urn:x-suse:xslt:profiling:docbook45-profile.xsl" 
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.docbook.org/xml/4.5/docbookx.dtd"
[<!ENTITY % entities SYSTEM "entity-decl.ent">
%entities;
]>
<chapter id="cha.daps.user.oview">
 <title>Conceptual Overview</title>
 <para>
  <remark>topics: daps components,
  directory structure, ENV files, profiling, validation, external components
  like XML editor and FO formatter, stylesheets ...</remark>
 </para>
 <para>&dapsacr; (&dapslong;) is developed as open source software for Linux 
  operating systems. It consists of integrated tools, stylesheets, scripts, and 
  makefiles that support technical writers in the editing, translation and 
  publishing process of DocBook XML files. &dapsacr; supports single source publishing 
  into a number of different output formats, like PDF, HTML, single HTML, or EPUB.</para>
 <para>It can be used in combination with the following components:</para>
 <itemizedlist>
  <listitem>
   <para>an XML editor of your choice</para>
  </listitem>
  <listitem>
   <para>an FO formatter (like FOP or XEP)</para>
  </listitem>
  <listitem>
   <para>a version management system, like CVS or Subversion</para>
  </listitem>
 </itemizedlist>
 <sect1 id="sec.daps.user.oview.concepts">
  <title>Basic Concepts</title>
  <para>To define the build environment to use, &dapsacr; uses a set of
  parameters (keys) that can be set in various places:</para>
  <itemizedlist>
   <listitem>
    <para>/etc/daps/conf (system-wide configuration file)</para>
   </listitem>
   <listitem>
    <para>$HOME/.daps/config (user-specific configuration file)</para>
   </listitem>
   <listitem>
    <para>&env; file of the documentation project (usually for project-
   or book-specific settings)</para>
   </listitem>
   <listitem>
    <para>on the fly at the command line. You can specify them either as 
   as options to a <command>daps</command> or  </para>
   </listitem>
  </itemizedlist>
  <para>The configuration file <filename>/etc/daps/conf</filename> lists all keys 
 that can be used, including a short description for each key.</para>
  <sect2>
   <title>Defining Documentation Projects</title>
   <para>To define which XML files belong to your documentation project, and
   which variants can be generated from the project with the help of conditional
   text (or profiling, as it is called in DocBook), you need a special file
   called &env; file. It is a text file and sets a number of variables for your
   documentation project:</para>
   <example id="ex.daps.env.user">
    <title>An <filename>&env;-*</filename> file</title>
    <screen># &env; file for &dapsacr; User Guide
MAIN=MAIN.DAPS.xml         <co id="co.daps.main"/>
ROOTID=book_daps_user.xml  <co id="co.daps.rootid"/>
PROFARCH="x86;ppc"         <co id="co.daps.profarch"/>
PROFOS="lin;win"           <co id="co.daps.profos"/>
LAYOUT=                    <co id="co.daps.layout"/>
DISTVER=1.0                <co id="co.daps.distver"/>
PRODUCTNAME="&dapslong;"   <co id="co.daps.productname"/>

export DAPS_ENV_NAME=$(basename $BASH_SOURCE) <co id="co.daps.source"/>
    </screen>
   </example>
   <calloutlist>
    <callout arearefs="co.daps.main">
     <para>Mandatory variable. Sets the main file that contains 
     <quote>references</quote> to other books, chapters, appendices, etc. If
     your documentation project consists of multiple books and articles 
     (a <literal>set</literal>), the MAIN variable usually references the 
     file that contains the &lt;set&gt; element.
      </para>
    </callout>
    <callout arearefs="co.daps.rootid">
     <para>Optional variable. Defines the root ID of the element to be used for
     creating an output format. Usually, you define the root ID of a
     &lt;book&gt; or article element here.  
     </para>
    </callout>
    <callout arearefs="co.daps.profarch">
     <para>Optional variable. If you want to profile your text for different 
      platforms or (processor) achitectures (for example, x86 or ppc), this 
      variable selects the architecture profiling information. 
      </para>
    </callout>
    <callout arearefs="co.daps.profos">
     <para>Optional variable.If you want to profile your text for different 
      operating systems (for example, for Linux and Windows), this variable 
      selects the operating system profiling
      information. 
     </para>
    </callout>
    <!--taroth 2011-12-29: no longer used in our books, explain anyway??-->
    <!--<callout arearefs="co.daps.condition">
     <para>
      Selects those parts of the book that are to be printed or made
      available online. Currently used parameters are print and
      online.
     </para>
    </callout>-->
    <callout arearefs="co.daps.layout">
     <para>Optional variable. Determines the layout of the book. 
     Per default, &dapsacr; ships the following layouts:
     <remark>taroth 2012-01-19: bound to change soon, therefore commenting 
     for now</remark>
     </para>
    <!--<variablelist>
     <varlistentry>
      <term>
       <option>flyer</option>
      </term>
      <listitem>
       <para>Creates a flyer layout that can be used for Quick Starts.</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>
       <option>pocket</option>
      </term>
      <listitem>
       <para>Creates a pocket layout which a smaller page format.</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Empty, no value</term>
      <listitem>
       <para>Selects the default layout.<remark>taroth 2011-12-29: 
            =layout of SUSE manuals? where is the default defined?</remark>
       </para>
      </listitem>
     </varlistentry>
    </variablelist>-->
    </callout>
    <callout arearefs="co.daps.distver">
     <para>
      <remark>taroth 2012-01-19: variable name will probably change - 
     https://sourceforge.net/p/daps/tickets/25/</remark>
     Sets the version number of the current project. 
     </para>
    </callout>
    <callout arearefs="co.daps.productname">
     <para>Optional variable. &dapsacr; allows you to set product name and 
     product version dynamically. This enables you to use the same XML sources 
     for different products. To use this feature, use the following entities in 
     your XML sources:</para>
     <itemizedlist>
      <listitem>
       <para>&amp;productname;</para>
      </listitem>
      <listitem>
       <para>&amp;productnamereg; (if the productname should include a copyright or 
     trademark symbol)</para>
      </listitem>
      <listitem>
       <para>&amp;productversion;</para>
      </listitem>
     </itemizedlist>
     <para>These entities will be dynamically resolved to the values of DISTVER, 
     PRODUCTNAME, and PRODUCTNAMEREG that you can set in a project-specific (or
     boo-specific) &env; file. 
<!--# Examle:
#   PRODUCTNAME="MyVeryFirstSoftware"
#   PRODUCTNAME="MyVeryFirstSoftwareÂ©"
#   DISTVER="4.2"
--></para>
    </callout>
    <callout arearefs="co.daps.source">
     <para>Optional line. You only need to add this line if you want to be able to 
      source &env; files with &dapsacr;. Sourcing an &env; file was necessary
      to work with the documentation environment provided by &susedoc;&mdash;
      &dapsacr;' predecessor.</para>
    </callout>
   </calloutlist>
   <para>For a documentation set (a collection of books), you can define
   multiple &env; files. By referring different root IDs, you define which book
   is to be built with the specific &env; file. Of course, you can also specify
   different layouts for certain books (or use different values for one of the
   other variables defined in the &env; file): 
   </para>
   <example id="ex.daps.env.quick">
    <title>An <filename>&env;-*</filename> file</title>
    <screen># &env; file for &dapsacr; Quick Start
MAIN="MAIN.DAPS.xml"
ROOTID="art.daps.quickstart"
PROFOS="osuse"
PROFARCH="x86;amd64;em64t"
DISTVER="1.0"
LAYOUT="flyer"

export DAPS_ENV_NAME=$(basename $BASH_SOURCE)
</screen>
   </example>
   <para>Because &env; files define which XML files belong to a documentation 
    project, they are necessary for validating your XML files and for generating
    any kind of output. Without &env; files, you cannot produce any output from
    your DocBook sources with &dapsacr;.<remark>taroth 2012-01-17: not 100% sure
    if this is still the case</remark>
   </para>
   <para>If your documentation set contains cross-references between the 
   individual books, it is useful to define an additional &env; file 
   (<emphasis>without</emphasis> the root ID variable) that can be used to 
   generate an HTML output that contains all hyperlinks between the individual 
   books.<remark>taroth 2011-12-29: FIXME; add another example ENV file for 
   that purpose</remark>
   </para>
   <para>&dapsacr; also contains a script for creating a new documentation
    project from scratch. <remark>taroth 2011-12-29: add xref later</remark>.
    When using that script, an example &env; file is automatically created.</para>
  </sect2>
  <sect2>
   <title>Directory Structure</title>
   <para>For &dapsacr; to work out of the box, XML files and images should be 
    organized in the following directory structure:</para>
  </sect2>
 </sect1>
</chapter>
